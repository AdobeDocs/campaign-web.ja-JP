---
audience: end-user
title: ビジネスルール（タイポロジ）の操作
description: タイポロジとタイポロジルールを使用して、配信の送信を制御、フィルタリングおよび監視する方法について説明します。
exl-id: 54fdd03a-e49d-4f22-b6d4-6055c8922e58
source-git-commit: 1f3f3afb9b21ab37aeea73057d832cea172c00bf
workflow-type: tm+mt
source-wordcount: '1449'
ht-degree: 97%

---

# ビジネスルール（タイポロジ）の操作 {#typologies}

>[!CONTEXTUALHELP]
>id="acw_homepage_welcome_rn1"
>title="ビジネスルール"
>abstract="Adobe Campaign web ユーザーインターフェイスでタイポロジとタイポロジルールを作成できるようになりました。 タイポロジを使用すると、配信の送信を制御、フィルタリングおよび優先順位付けすることができます。"
>additional-url="https://experienceleague.adobe.com/docs/campaign-web/v8/release-notes/release-notes.html?lang=ja" text="リリースノートを参照してください"


>[!CONTEXTUALHELP]
>id="acw_business_rules"
>title="タイポロジとタイポロジルール"
>abstract="タイポロジを使用すると、すべての配信にわたってビジネスプラクティスを標準化できます。タイポロジとは、配信状況を制御、フィルター、および優先順位付けするタイポロジルールの集まりです。タイポロジルール内の条件に一致するプロファイルは、準備フェーズで配信オーディエンスから除外されます。"

## タイポロジについて

タイポロジを使用すると、すべての配信にわたってビジネスプラクティスを標準化できます。**タイポロジ**&#x200B;とは、配信状況を制御、フィルター、優先順位付けする&#x200B;**タイポロジルール**&#x200B;のコレクションです。タイポロジルール内の条件に一致するプロファイルは、準備フェーズで配信オーディエンスから除外されます。

タイポロジを使用すると、特定の要素（購読解除リンクや件名など）や、対象とするターゲット（購読解除者、競合他社、非ロイヤルティ顧客など）からグループを除外するフィルタリングルールが配信に常に含まれていることを確認できます。

タイポロジには、**[!UICONTROL 管理]**／**[!UICONTROL ビジネスルール]**&#x200B;メニューからアクセスできます。この画面から、既存のすべてのタイポロジとタイポロジルールにアクセスしたり、必要に応じて新しいタイポロジを作成したりできます。

![](assets/business-rules-list.png)

>[!NOTE]
>
>**[!UICONTROL タイポロジルール]**&#x200B;リストには、web ユーザーインターフェイスまたはクライアントコンソールでこれまでに作成されたすべての既存のルールが表示されます。ただし、web ユーザーインターフェイスで作成できるのは、**コントロール**&#x200B;ルールと&#x200B;**フィルタリング**&#x200B;ルールのみです。頻度ルールや処理能力ルールなど、他のタイプのタイポロジルールを作成するには、Campaign v8 クライアントコンソールを使用します。[詳しくは、クライアントコンソールでタイポロジルールを作成する方法を参照してください](https://experienceleague.adobe.com/ja/docs/campaign/automation/campaign-optimization/campaign-typologies){target="_blank"}

メッセージにタイポロジを適用する主な手順は次のとおりです。

1. [タイポロジを作成します](#typology)。
1. [タイポロジルールを作成します](#typology-rules)。
1. [タイポロジのタイポロジルールを参照します](#add-rules)。
1. [メッセージにタイポロジを適用します](#message)。

## タイポロジの作成 {#typology}

>[!CONTEXTUALHELP]
>id="acw_business_rules_typology_properties"
>title="タイポロジプロパティ"
>abstract="タイポロジのプロパティを定義し、「**[!UICONTROL その他のオプション]**」セクションを展開して詳細設定にアクセスします。「**[!UICONTROL IP アフィニティ]**」フィールドを使用して、IP アフィニティをタイポロジに関連付けます。これにより、各アフィニティに使用できる特定の IP アドレスを定義して、アウトバウンド SMTP トラフィックの制御を強化できます。"

>[!CONTEXTUALHELP]
>id="acw_business_rules_typology_ip_affinity"
>title="IP アフィニティ"
>abstract="IP アドレスを使用したアフィニティの管理では、配信アクションのタイポロジに応じてトラフィックのタイプごとに異なる IP アドレスを関連付けることで、送信 SMTP トラフィックをよりコントロールすることができます。"

タイポロジを作成するには、次の手順に従います。

1. **[!UICONTROL ビジネスルール]**&#x200B;メニューに移動して、「**[!UICONTROL タイポロジ]**」タブを選択します。

1. 「**[!UICONTROL タイポロジを作成]**」ボタンをクリックして、タイポロジの&#x200B;**[!UICONTROL ラベル]**&#x200B;を入力します。

1. 「**[!UICONTROL その他のオプション]**」セクションを展開して、タイポロジの内部名、ストレージフォルダー、説明などの詳細設定を定義します。

   ![](assets/business-rules-typology.png)

   >[!NOTE]
   >
   >「**[!UICONTROL IP アフィニティ]**」フィールドを使用すると、IP アフィニティをタイポロジに関連付けることができます。これにより、各アフィニティに使用できる特定の IP アドレスを定義して、アウトバウンド SMTP トラフィックの制御を強化できます。例えば、1 つの国またはサブドメインにつき 1 つのアフィニティを使用できます。さらに、1 つの国につき 1 つのタイポロジを作成し、各アフィニティを各国の対応するタイポロジに関連付けることができます。

1. 「**[!UICONTROL 作成]**」をクリックして、タイポロジの作成を確認します。

タイポロジが開き、詳細が開きます。この画面から、既存のタイポロジルールを直接参照できます。また、新しいタイポロジルールを作成し、後でタイポロジで参照することもできます。
* [詳しくは、タイポロジルールを作成する方法を参照してください](#add-rules)
* [詳しくは、タイポロジルールを参照する方法を参照してください](#add-rules)

## タイポロジルールの作成 {#typology-rule}

>[!CONTEXTUALHELP]
>id="acw_business_rules_typology_rules_properties"
>title="タイポロジルールプロパティ"
>abstract="タイポロジルールのプロパティを定義します。**コントロール**&#x200B;ルールはメッセージの品質と有効性を送信前に検証し、**フィルタリング**&#x200B;ルールは特定の基準に基づいてターゲットオーディエンスのセグメントを除外します。<br/><br/>また、同じメッセージ処理フェーズ中に同じタイプの複数のルールを実行する際に、ルールの実行順序を変更して、タイポロジルールの実行順序を管理することもできます。"

タイポロジルールを作成するには、**[!UICONTROL ビジネスルール]**&#x200B;メニューに移動し、「**[!UICONTROL タイポロジルール]**」タブを選択します。

「**[!UICONTROL タイポロジルールを作成]**」ボタンをクリックし、次に説明する手順に従います。

### タイポロジルールのプロパティの定義 {#properties}

タイポロジルールのプロパティを定義します。

1. ルールの&#x200B;**[!UICONTROL ラベル]**&#x200B;を入力します。

   ![](assets/business-rules-control-rule.png)

1. タイポロジルールの&#x200B;**[!UICONTROL タイプ]**&#x200B;を選択します。

   * **コントロール**：メッセージの品質と有効性（文字の表示、SMS の長さ、アドレスの形式、URL の短縮など）を送信前に確認します。これらは、コンテンツの確認と変更の複雑なロジックを定義するスクリプトインターフェイスを使用して作成されます。

   * **フィルタリング**&#x200B;ルールでは、特定の条件（年齢、場所、国、電話番号など）に基づいてターゲットオーディエンスのセグメントを除外します。これらのルールは、ターゲティングディメンションにリンクされます。

   >[!NOTE]
   >
   >現時点では、web ユーザーインターフェイスから作成できるのは、**コントロール**&#x200B;タイポロジルールと&#x200B;**フィルタリング**&#x200B;タイポロジルールのみです。他のタイプのルールを作成するには、クライアントコンソールを使用します。[詳しくは、クライアントコンソールでタイポロジルールを作成する方法を参照してください](https://experienceleague.adobe.com/ja/docs/campaign/automation/campaign-optimization/campaign-typologies){target="_blank"}

1. ルールに関連付ける&#x200B;**[!UICONTROL チャネル]**&#x200B;を選択します。

1. ルールを作成した直後にアクティブにしない場合は、「**[!UICONTROL アクティブ]**」オプションの切替スイッチをオフにします。

1. ルールの&#x200B;**[!UICONTROL 実行順序]**&#x200B;を定義します。

   デフォルトでは、タイポロジルールの順序は 50 に設定されています。この値を調整すると、同じメッセージ処理フェーズ中に同じタイプの複数のルールを実行する際に、タイポロジルールの実行順序を管理できます。例えば、実行順序が 20 番目のフィルタリングルールは、実行順序が 30 番目のフィルタリングルールより先に実行されます。

1. 「**[!UICONTROL その他のオプション]**」セクションを展開して、ルールの内部名、フォルダーストレージ、説明などの詳細設定にアクセスします。

1. コントロールルールの場合、その他のオプションで 2 つの追加ルールを使用できます。次のように、ルールを適用するタイミングとアラートレベルを指定できます。

   * **[!UICONTROL フェーズ]**：このフィールドでは、配信ライフサイクルのどの時点でルールを適用するかを指定できます。**[!UICONTROL フェーズ]**&#x200B;ドロップダウンリストで適用する値を選択します。可能な値について詳しくは、以下の節を展開してください。

   +++コントロールルールのフェーズ：

   **[!UICONTROL ターゲティングの開始時]**：エラーが発生した場合にパーソナライゼーションを実行しないようにするには、この段階でコントロールルールを適用します。

   **[!UICONTROL ターゲティングの終了時]**：コントロールルールを適用する前にターゲットのボリュームを把握しておきたい場合は、このフェーズを選択します。例えば、配達確認のターゲットのサイズを検証コントロールルールは、各ターゲティングステージの後に適用します。このルールにより、配達確認の受信者数が多い場合は、メッセージのパーソナライゼーションが行われないようにすることができます。

   **[!UICONTROL パーソナライゼーションの開始時]**：コントロールルールで、メッセージのパーソナライゼーションの承認を検証する場合は、このフェーズを選択します。メッセージのパーソナライゼーションは、分析フェーズで実行されます。

   **[!UICONTROL 分析の終了時]**：確認時にメッセージのパーソナライゼーションが完了している必要がある場合は、このフェーズを選択します。

+++

   * **[!UICONTROL レベル]**：このオプションを使用すると、ルールのアラートレベルを指定できます。詳しくは、以下の節を展開してください。

   +++コントロールルールレベル：

   **[!UICONTROL エラー]**：メッセージの準備を停止します。

   **[!UICONTROL 警告]**：準備ログに警告を表示します。

   **[!UICONTROL 情報]**：準備ログの情報を表示します。

   <!--**[!UICONTROL Status]**:-->

   **[!UICONTROL 詳細]**：サーバーログに情報を表示します。

+++

### ルールコンテンツの作成 {#build}

>[!CONTEXTUALHELP]
>id="acw_business_rules_typology_rules_filtering"
>title="フィルタリング"
>abstract="**フィルタリング**&#x200B;ルールでは、特定の条件（年齢、場所、国、電話番号など）に基づいてターゲットオーディエンスのセグメントを除外します。タイポロジルールのターゲティングディメンションを選択し、「**[!UICONTROL ルールを追加]**」ボタンをクリックしてクエリモデラーにアクセスし、ルールを作成します。"

>[!CONTEXTUALHELP]
>id="acw_business_rules_typology_rules_code"
>title="コード"
>abstract="**コントロール**&#x200B;ルールでは、メッセージの品質と有効性（文字の表示、SMS の長さ、アドレスの形式、URL の短縮など）を送信前に確認します。これらは、JavaScript コードを使用して作成されます。"

タイポロジルールのプロパティを定義したら、ルールのコンテンツを作成できます。

* **コントロールルール**&#x200B;の場合は、「**コードを編集**」ボタンをクリックし、JavaScript を使用してルールのロジックを入力します。次の例では、ターゲットが空の場合にログに警告を表示するルールを作成します。

  ![](assets/business-rules-code.png)

* **フィルタリングルール**&#x200B;の場合は、ターゲティングディメンションを選択し、「**[!UICONTROL ルールを追加]**」ボタンをクリックして、[クエリモデラー](../query/query-modeler-overview.md)を使用してフィルタリング条件を定義します。

  ![](assets/business-rules-query.png)

ルールの準備が整ったら、「**[!UICONTROL 作成]**」ボタンをクリックして、タイポロジルールを作成します。これで、タイポロジにルールを参照して、メッセージに適用できます。

## タイポロジのタイポロジルールの参照 {#add-rules}

タイポロジで 1 つまたは複数のルールを参照するには、次の手順に従います。

1. 「**[!UICONTROL タイポロジ]**」タブに移動し、ルールを参照するタイポロジを開きます。

1. 「**[!UICONTROL タイポロジルール]**」タブを選択し、「**[!UICONTROL タイポロジルールを追加]**」ボタンをクリックします。

   ![](assets/business-rules-reference.png)

1. タイポロジに関連付ける 1 つまたは複数のタイポロジルールを選択し、確認します。

   ![](assets/business-rules-typology-save.png)

1. 「**[!UICONTROL 保存]**」をクリックします。

これで、メッセージにタイポロジを適用できます。完了すると、選択したすべてのタイポロジルールが実行され、定義済みのチェックが実行されます。

## メッセージへのタイポロジの適用 {#message}

メッセージまたはメッセージテンプレートにタイポロジを適用するには、メッセージ設定でタイポロジを選択する必要があります。[詳しくは、配信設定を指定する方法を参照してください](../advanced-settings/delivery-settings.md#typology)

![](assets/business-rules-apply.png)

完了すると、タイポロジに含まれているタイポロジルールがメッセージの準備中に実行されて、配信の有効性がチェックされます。タイポロジルール内の条件に一致するプロファイルは、配信オーディエンスから除外されます。
