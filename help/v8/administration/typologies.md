---
audience: end-user
title: ビジネスルール（タイポロジ）の操作
description: タイポロジとタイポロジルールを使用して、配信の送信を制御、フィルタリングおよび監視する方法について説明します。
exl-id: 54fdd03a-e49d-4f22-b6d4-6055c8922e58
source-git-commit: 1f3f3afb9b21ab37aeea73057d832cea172c00bf
workflow-type: tm+mt
source-wordcount: '1449'
ht-degree: 12%

---

# ビジネスルール（タイポロジ）の操作 {#typologies}

>[!CONTEXTUALHELP]
>id="acw_homepage_welcome_rn1"
>title="ビジネスルール"
>abstract="Adobe Campaign web ユーザーインターフェイスでタイポロジとタイポロジルールを作成できるようになりました。 タイポロジを使用すると、配信の送信を制御、フィルタリングおよび優先順位付けすることができます。"
>additional-url="https://experienceleague.adobe.com/docs/campaign-web/v8/release-notes/release-notes.html?lang=ja" text="リリースノートを参照してください"


>[!CONTEXTUALHELP]
>id="acw_business_rules"
>title="タイポロジとタイポロジルール"
>abstract="タイポロジを使用すると、すべての配信でビジネスプラクティスを標準化できます。 タイポロジとは、配信状況を制御、フィルター、および優先順位付けするタイポロジルールの集まりです。タイポロジルール内の条件に一致するプロファイルは、準備段階で配信オーディエンスから除外されます。"

## タイポロジについて

タイポロジを使用すると、すべての配信でビジネスプラクティスを標準化できます。 **タイポロジ** は、配信の送信を制御、フィルタリングおよび優先順位付けできる **タイポロジルール** のコレクションです。 タイポロジルール内の条件に一致するプロファイルは、準備段階で配信オーディエンスから除外されます。

タイプは、配信に常に特定の要素（購読解除リンクや件名行など）が含まれていることを確認したり、対象とするターゲットからグループ（非購読者、競合他社、非ロイヤルティ顧客など）を除外するフィルタリングルールを使用したりします。

タイポロジには、**[!UICONTROL 管理]**/**[!UICONTROL ビジネスルール]** メニューからアクセスできます。 この画面から、既存のすべてのタイポロジとタイポロジルールにアクセスしたり、必要に応じて新しいタイポロジを作成したりできます。

![](assets/business-rules-list.png)

>[!NOTE]
>
>**[!UICONTROL タイポロジルール]** リストには、これまでに web ユーザーインターフェイスまたはクライアントコンソールで作成されたすべての既存のルールが表示されます。 ただし、Web ユーザーインターフェイスで作成できるのは **コントロール** ルールと **フィルタリング** ルールのみです。 頻度ルールや処理能力ルールなど、他のタイプのタイポロジルールを作成するには、Campaign v8 クライアントコンソールを使用します。 [ クライアントコンソールでタイポロジルールを作成する方法を説明します ](https://experienceleague.adobe.com/ja/docs/campaign/automation/campaign-optimization/campaign-typologies){target="_blank"}

タイポロジをメッセージに適用する主な手順は次のとおりです。

1. [ タイポロジを作成 ](#typology) します。
1. [ タイポロジルールを作成 ](#typology-rules).
1. [ タイポロジの参照タイポロジルール ](#add-rules)。
1. [ タイポロジをメッセージに適用 ](#message)

## タイポロジの作成 {#typology}

>[!CONTEXTUALHELP]
>id="acw_business_rules_typology_properties"
>title="タイポロジプロパティ"
>abstract="タイポロジのプロパティを定義し、「**[!UICONTROL その他のオプション]**」セクションを展開して詳細設定にアクセスします。 「**[!UICONTROL IP アフィニティ]**」フィールドを使用して、IP アフィニティをタイポロジに関連付けます。 これにより、アフィニティごとに使用できる特定の IP アドレスを定義することで、送信 SMTP トラフィックをより適切に制御できます。"

>[!CONTEXTUALHELP]
>id="acw_business_rules_typology_ip_affinity"
>title="IP アフィニティ"
>abstract="IP アドレスを使用したアフィニティの管理では、配信アクションのタイポロジに応じてトラフィックのタイプごとに異なる IP アドレスを関連付けることで、送信 SMTP トラフィックをよりコントロールすることができます。"

タイポロジを作成するには、次の手順に従います。

1. **[!UICONTROL ビジネスルール]** メニューに移動し、「**[!UICONTROL タイポロジ]**」タブを選択します。

1. 「**[!UICONTROL タイポロジを作成]**」ボタンをクリックし、タイポロジの **[!UICONTROL ラベル]** を入力します。

1. 「**[!UICONTROL その他のオプション]**」セクションを展開して、タイポロジの内部名、ストレージフォルダー、説明などの詳細設定を定義します。

   ![](assets/business-rules-typology.png)

   >[!NOTE]
   >
   >**[!UICONTROL IP アフィニティ]** フィールドを使用すると、IP アフィニティをタイポロジに関連付けることができます。 これにより、アフィニティごとに使用できる特定の IP アドレスを定義することで、送信 SMTP トラフィックをより適切に制御できます。  例えば、1 つの国またはサブドメインにつき 1 つのアフィニティを使用できます。さらに、1 つの国につき 1 つのタイポロジを作成し、各アフィニティを各国の対応するタイポロジに関連付けることができます。

1. **[!UICONTROL 作成]** をクリックして、タイポロジの作成を確定します。

タイポロジが開き、詳細が開きます。 この画面から、既存のタイポロジルールを直接参照できます。 また、新しいタイポロジルールを作成し、後でタイポロジで参照することもできます。
* [ タイポロジルールの作成方法を学ぶ ](#add-rules)
* [タイポロジでルールを参照する方法を学ぶ](#add-rules)

## タイポロジルールの作成 {#typology-rule}

>[!CONTEXTUALHELP]
>id="acw_business_rules_typology_rules_properties"
>title="タイポロジルールプロパティ"
>abstract="タイポロジルールのプロパティの定義。 **コントロール** ルールは、メッセージの品質と有効性を事前送信で検証し、**フィルタリング** ルールは、特定の条件に基づいて、ターゲットオーディエンスのセグメントを除外します。<br/><br/> ルールの実行順序を変更して、同じタイプの複数のルールが同じメッセージ処理フェーズで実行される場合の、タイポロジルールの実行順序を管理することもできます。"

タイポロジルールを作成するには、**[!UICONTROL ビジネスルール]** メニューに移動し、「**[!UICONTROL タイポロジルール]**」タブを選択します。

「**[!UICONTROL タイポロジルールを作成]**」ボタンをクリックし、次に説明する手順に従います。

### タイポロジルールのプロパティの定義 {#properties}

タイポロジルールのプロパティを定義します。

1. ルールの **[!UICONTROL ラベル]** を入力します。

   ![](assets/business-rules-control-rule.png)

1. タイポロジルールの **[!UICONTROL タイプ]** を選択します。

   * **コントロール**：メッセージの品質と有効性（文字表示、SMS の長さ、アドレス形式、URL の短縮など）を送信前に確認します。 コンテンツのチェックと変更の複雑なロジックを定義するスクリプティングインターフェイスを使用して作成されます。

   * **フィルタリング** ルールでは、特定の条件（年齢、場所、国、電話番号など）に基づいてターゲットオーディエンスのセグメントを除外します。 これらのルールは、ターゲティングディメンションにリンクされます。

   >[!NOTE]
   >
   >現時点では、Web ユーザーインターフェイスから作成できるのは **コントロール** タイポロジルールと **フィルタリング** タイポロジルールのみです。 その他のタイプのルールを作成するには、クライアントコンソールを使用します。 [ クライアントコンソールでタイポロジルールを作成する方法を説明します ](https://experienceleague.adobe.com/ja/docs/campaign/automation/campaign-optimization/campaign-typologies){target="_blank"}

1. ルールに関連付ける **[!UICONTROL チャネル]** を選択します。

1. ルールを作成した直後にアクティブにしない場合は、「**[!UICONTROL アクティブ]**」オプションをオフにします。

1. ルール **[!UICONTROL 実行順序]** を定義します。

   デフォルトでは、タイポロジルールの順序は 50 に設定されています。 この値を調整すると、同じタイプの複数のルールが同じメッセージ処理フェーズで実行される際に、タイポロジルールが実行されるシーケンスを管理できます。 例えば、実行順序が 20 番目のフィルタールールは、実行順序が 30 番目のフィルタールールより先に実行されます。

1. 「**[!UICONTROL その他のオプション]**」セクションを展開すると、ルールの内部名、フォルダーストレージ、説明などの詳細設定にアクセスできます。

1. コントロールルールの場合、追加のオプションで 2 つの追加ルールを使用できます。 ルールを適用するタイミングとアラートレベルを指定できます。

   * **[!UICONTROL フェーズ]**：このフィールドを使用すると、配信ライフサイクルのどの時点でルールを適用するかを指定できます。 適用する値を「**[!UICONTROL フェーズ]**」ドロップダウンリストで選択します。 可能な値の詳細については、以下の節を展開してください。

   +++コントロールルールのフェーズ：

   **[!UICONTROL ターゲティングの開始時]**：エラーが発生した場合にパーソナライゼーションステップが実行されないようにするには、ここで制御ルールを適用します。

   **[!UICONTROL ターゲティング後]**：制御ルールを適用するためにターゲットのボリュームを把握する必要がある場合は、このフェーズを選択します。 例えば、プルーフのサイズ確認コントロールルールは、各ターゲティングステージの後に適用されます。このルールにより、プルーフの受信者が多すぎる場合に、メッセージがパーソナライゼーションされるのを防ぎます。

   **[!UICONTROL パーソナライゼーションの開始時]**：コントロールがメッセージのパーソナライゼーションの承認に関係する場合は、このフェーズを選択する必要があります。 メッセージのパーソナライゼーションは、分析フェーズで実行されます。

   **[!UICONTROL 分析の終了時]**：チェックでメッセージのパーソナライゼーションの完了が必要な場合は、このフェーズを選択します。

+++

   * **[!UICONTROL レベル]**：このオプションを使用すると、ルールのアラートレベルを指定できます。 詳しくは、以下の節を展開してください。

   +++制御ルールレベル：

   **[!UICONTROL エラー]**: メッセージの準備を停止します。

   **[!UICONTROL 警告]**：準備ログに警告を表示します。

   **[!UICONTROL 情報]**：準備ログの情報を表示します。

   <!--**[!UICONTROL Status]**:-->

   **[!UICONTROL 詳細]**: サーバーログに情報を表示します。

+++

### ルールコンテンツの作成 {#build}

>[!CONTEXTUALHELP]
>id="acw_business_rules_typology_rules_filtering"
>title="フィルタリング"
>abstract="**フィルタリング** ルールでは、特定の条件（年齢、場所、国、電話番号など）に基づいてターゲットオーディエンスのセグメントを除外します。 タイポロジルールのターゲティングディメンションを選択し、「**[!UICONTROL ルールを追加]**」ボタンをクリックしてクエリモデラーにアクセスし、ルールを作成します。"

>[!CONTEXTUALHELP]
>id="acw_business_rules_typology_rules_code"
>title="コード"
>abstract="**制御** ルールは、メッセージの品質と有効性（文字表示、SMS の長さ、アドレス形式、URL の短縮など）を事前送信で検証します。 これらは、JavaScript コードを使用して作成されます。"

タイポロジルールのプロパティを定義したら、ルールのコンテンツを作成できます。

* **コントロールルール** については、「**コードを編集**」ボタンをクリックし、JavaScriptを使用してルールのロジックを入力します。 次の例では、ターゲットが空の場合にログに警告を表示するルールを作成しています。

  ![](assets/business-rules-code.png)

* 「**フィルタリングルール**」では、ターゲティングディメンションを選択し、「**[!UICONTROL ルールを追加]**」ボタンをクリックして、[ クエリモデラー ](../query/query-modeler-overview.md) を使用してフィルタリング条件を定義します。

  ![](assets/business-rules-query.png)

ルールの準備が整ったら、「**[!UICONTROL 作成]** ボタンをクリックして、タイポロジルールを作成します。 ルールをタイポロジで参照して、メッセージに適用できるようになりました。

## タイポロジでの参照タイポロジルール {#add-rules}

タイポロジで 1 つまたは複数のルールを参照するには、次の手順に従います。

1. 「**[!UICONTROL タイポロジ]**」タブに移動し、ルールを参照するタイポロジを開きます。

1. 「**[!UICONTROL タイポロジルール]**」タブを選択し、「**[!UICONTROL タイポロジルールを追加」]** ボタンをクリックします。

   ![](assets/business-rules-reference.png)

1. タイポロジに関連付ける 1 つまたは複数のタイポロジルールを選択し、確定します。

   ![](assets/business-rules-typology-save.png)

1. 「**[!UICONTROL 保存]**」をクリックします。

これで、タイポロジをメッセージに適用できます。 完了すると、選択したすべてのタイポロジルールが実行され、定義済みのチェックが実行されます。

## メッセージへのタイポロジの適用 {#message}

タイポロジをメッセージまたはメッセージテンプレートに適用するには、メッセージ設定でタイポロジを選択する必要があります。 [ 配信設定の設定方法を学ぶ ](../advanced-settings/delivery-settings.md#typology)

![](assets/business-rules-apply.png)

完了したら、タイポロジに含まれているタイポロジルールが実行され、メッセージの準備中に配信が有効かどうかが確認されます。 タイポロジルール内の条件に一致するプロファイルは、配信オーディエンスから除外されます。
