---
audience: end-user
title: ファイルを転送アクティビティの使用
description: ファイル転送ワークフローアクティビティの使用方法について学ぶ
exl-id: a40c007e-c0c6-4e0f-aa0d-0260ecb74a03
source-git-commit: d6c6aac9d9127a770732b709873008613ae8c639
workflow-type: tm+mt
source-wordcount: '1253'
ht-degree: 73%

---

# ファイルを転送 {#transfer-file}

>[!CONTEXTUALHELP]
>id="acw_orchestration_transferfile"
>title="ファイルを転送"
>abstract="**ファイル転送**&#x200B;アクティビティでは、ファイルの送受信、ファイルの有無の確認、サーバー上のファイルのリストアップを行えます。使用されるプロトコルは、サーバー間プロトコルまたは HTTP プロトコルのいずれかです。"

>[!CONTEXTUALHELP]
>id="acw_orchestration_transferfile_options"
>title="「ファイルを転送」オプション"
>abstract="「ファイルを転送」オプション"

>[!CONTEXTUALHELP]
>id="acw_orchestration_transferfile_activity"
>title="ファイルを転送アクティビティ"
>abstract="ファイルを転送アクティビティ"

>[!CONTEXTUALHELP]
>id="acw_orchestration_transferfile_remoteserver"
>title="リモートサーバーにファイルを転送"
>abstract="接続するサーバーを指定します。"

>[!CONTEXTUALHELP]
>id="acw_orchestration_transferfile_source"
>title="ファイルのソースを転送"
>abstract="目的のファイル名を入力します。"

**ファイル転送**&#x200B;アクティビティは&#x200B;**データ管理**&#x200B;アクティビティで、ファイルの送受信、ファイルの有無のテスト、サーバー上のファイルのリストアップを行うことができます。使用されるプロトコルは、サーバー間プロトコルまたは HTTP プロトコルのいずれかです。

>[!NOTE]
>
>Campaign web ユーザーインターフェイスでは、**ファイル転送** と **web ダウンロード** の両方の機能を結合することで、2 つのアクティビティが 1 つに統合されました。 この統合によるアクティビティの機能への影響は一切ありません。

**ファイル転送**&#x200B;アクティビティを設定するには、以下の手順に従ってください。

## 転送プロトコルと操作の選択 {#protocol}

1. **ファイル転送** アクティビティをワークフローに追加し、使用するプロトコルに応じて、実行する転送のタイプを指定します。

   * HTTP プロトコルの場合は、「**[!UICONTROL Web ダウンロード]**」を選択します。これにより、GETまたは POST 操作を実行して、明示的な URL、外部アカウント、Adobe Campaign インスタンスにファイルをダウンロードできます。
   * その他のサーバー間プロトコルおよび関連するアクションについては、「**[!UICONTROL ファイル転送]**」を選択します。

1. アクティビティで実行するアクションを選択します。使用できるアクションは、選択した転送のタイプによって異なります。 詳しくは、以下のセクションを展開してください。

   +++**ファイル転送**&#x200B;タイプのアクティビティで使用可能なアクション

   * **[!UICONTROL Web ダウンロード]**：サーバーからファイルをダウンロードします。
   * **[!UICONTROL ファイルのアップロード]**：サーバーにファイルをアップロードします。
   * **[!UICONTROL ファイルが存在するかどうかをテスト]**：特定のファイルがサーバー上に存在するかどうかを確認します。「ファイルが存在する」と「ファイルが存在しません」という 2 つのアウトバウンドトランジションがアクティビティの後に生成されます。
   * **[!UICONTROL ファイルのリスト]**：サーバーで使用可能なすべてのファイルをリストします。

   +++

   +++**Web ダウンロード**&#x200B;タイプのアクティビティで使用可能なアクション

   * **[!UICONTROL 簡易転送（GET）]**：ファイルを取得します。
   * **[!UICONTROL フォームを使用して転送（POST）]**：ファイルおよび追加パラメーターをアップロードします。

   +++

   ![ ワークフロー転送ファイルのアクションオプションを示したスクリーンショット ](../assets/workflow-transfer-file-action.png)

1. デフォルトでは、ファイルのアップロードアクションの場合、アクティビティは前のアクティビティで指定されたファイルを使用します。別のファイルを使用するには、「**[!UICONTROL 前のアクティビティのファイルを使用]**」オプションをオフにして、「**[!UICONTROL ファイルを追加]**」ボタンをクリックします。

   「**[!UICONTROL ソース]**」フィールドに目的のファイル名を入力するか、式エディターを使用してイベント変数を使ってファイル名を計算します。[イベント変数と式エディターの操作方法を学ぶ](../event-variables.md)操作を繰り返して、必要な数のファイルを追加します。

## 転送先の定義 {#destination}

1. 「**[!UICONTROL リモートサーバー]**」セクションで、次のいずれかの方法を使用して接続するサーバーを指定します。

   * **[!UICONTROL 外部アカウントで定義された接続パラメーターを使用]**：外部アカウントの接続パラメーターを使用してサーバーに接続します。「**[!UICONTROL サーバーフォルダー]**」フィールドで、ファイル（またはファイルリストのアクションを表示するフォルダー）へのパスを指定します。
   * **[!UICONTROL クイック設定]**：ファイル（またはファイルリストのアクションを表示するフォルダー）の URL を入力します。
   * **[!UICONTROL Adobe Campaign インスタンス]**（web ダウンロードタイプのアクティビティ）：Adobe Campaign インスタンスサーバーからファイルをダウンロードします。

   ![ ワークフロー転送ファイルサーバーの設定オプションを示すスクリーンショット ](../assets/workflow-transfer-file-server.png)

1. Web ダウンロード POST アクションの場合、操作で追加のパラメーターを渡すことができます。これを行うには、「**[!UICONTROL パラメーターを追加]**」ボタンをクリックし、パラメーターの名前と値を指定します。 パラメーターを必要な数だけ追加できます。

1. デフォルトでは、ファイルのアップロード用に、サーバーにアップロードされたファイルが自動的に保存されます。 この履歴を保持しない場合は、「**[!UICONTROL 送信されたファイルの履歴を保持]**」オプションをオフにします。

## 履歴化設定 {#historization}

>[!CONTEXTUALHELP]
>id="acw_orchestration_transferfile_historization"
>title="ファイルの履歴化"
>abstract="「**[!UICONTROL ファイルを転送]**」アクティビティが実行されるたびに、アップロードされたファイルまたはダウンロードされたファイルが専用のフォルダーに保存されます。ワークフローの「ファイルを転送」アクティビティごとに 1 つのフォルダーが作成されます。デフォルトでは、ファイルは処理される前に、Adobe Campaign インストールフォルダー（`/vars`）のデフォルトストレージディレクトリに保存されます。特定のフォルダーを使用するには、「**[!UICONTROL デフォルトストレージディレクトリを使用]**」オプションをオフに切り替えて、ディレクトリのパスを入力します。"

「**[!UICONTROL ファイルを転送]**」アクティビティが実行されるたびに、アップロードされたファイルまたはダウンロードされたファイルが専用のフォルダーに保存されます。ワークフローの「ファイルを転送」アクティビティごとに 1 つのフォルダーが作成されます。デフォルトでは、ファイルは処理される前に、Adobe Campaign インストールフォルダー（`/vars`）のデフォルトストレージディレクトリに保存されます。特定のフォルダーを使用するには、「**[!UICONTROL デフォルトストレージディレクトリを使用]**」オプションをオフに切り替えて、ディレクトリのパスを入力します。

![ ワークフロー転送ファイルの履歴化の設定を示したスクリーンショット ](../assets/workflow-transfer-file-historization.png)

サーバー上の物理領域を保持するために、このフォルダーのサイズを制限することが重要です。 それには、アクティビティのフォルダーの最大ファイル数または合計サイズを定義します。 デフォルトで許可されている値はそれぞれ 100 個と 50 MB です。

このアクティビティを実行するたびに、次のようにフォルダーがチェックされます。

* アクティビティ実行の 24 時間前までに作成されたファイルのみが対象です。
* 考慮するファイルの数が「**[!UICONTROL ファイル数]**」フィールドの値を超えると、許可されているファイルの最大数に達するまで、最も古いファイルが削除されます。
* 考慮するファイルの合計サイズが **[!UICONTROL Maximum size （MB 単位）]** パラメーターの値を超えると、許可されている最大サイズに達するまで最も古いファイルが削除されます。

>[!CAUTION]
>
>アクティビティを再度実行しない場合、そのフォルダーはチェックもパージもされません。 大きなファイルを転送するときは注意が必要です。

## 詳細オプションとエラー管理オプション {#advanced}

>[!CONTEXTUALHELP]
>id="acw_orchestration_transferfile_advancedoptions_delete_file"
>title="転送後にソースファイルを削除"
>abstract="転送が成功したら、ソースファイルを消去します。"

>[!CONTEXTUALHELP]
>id="acw_orchestration_transferfile_advancedoptions_display_logs"
>title="セッションログを表示"
>abstract="転送操作に関連する情報は、ワークフローログに表示されます。"

>[!CONTEXTUALHELP]
>id="acw_orchestration_transferfile_advancedoptions_list_files"
>title="すべてのファイルを表示"
>abstract="このオプションは、**vars.filenames** イベント変数でサーバー上に存在するすべてのファイルのインデックスを作成します。"

>[!CONTEXTUALHELP]
>id="acw_orchestration_transferfile_process_missing_file"
>title="不明なファイルを処理"
>abstract="このオプションを使用すると、アクティビティの後に&#x200B;**ファイルなし**&#x200B;アウトバウンドトランジションを有効にできます。"

>[!CONTEXTUALHELP]
>id="acw_orchestration_transferfile_process_errors"
>title="エラーを処理"
>abstract="このオプションを使用すると、アクティビティの後に&#x200B;**エラー**&#x200B;アウトバウンドトランジションを有効にできます。"

1. **[!UICONTROL 詳細オプション]**&#x200B;では、設定しているアクティビティのタイプに基づいて追加のオプションを使用できます。詳しくは、以下のセクションを展開してください。

   +++**[!UICONTROL ファイル転送]**&#x200B;タイプのアクティビティの追加オプション

   * **[!UICONTROL 転送後にソースファイルを削除]**：転送が成功した後にソースファイルを消去します。
   * **[!UICONTROL セッションログを表示]**：このオプションを有効にすると、ワークフローが実行された後、転送操作に関する情報がワークフローログに表示されます。
   * **[!UICONTROL すべてのファイルを表示]**（ファイルリストのアクション）：このオプションでは、`vars.filenames` イベント変数内のサーバー上に存在するすべてのファイルのインデックス作成を行います。ファイル名は、`n` 文字で区切られます。[詳しくは、イベント変数の操作方法を参照してください](../event-variables.md)

   +++

   +++**[!UICONTROL Web ダウンロード]**&#x200B;タイプのアクティビティの追加オプション

   * **[!UICONTROL リダイレクトに従う]**：ファイルのリダイレクトでは、上書きを使用して、データの入力や出力を別のタイプのデバイスに送信できます。
   * **[!UICONTROL HTTP ヘッダーをファイルに追加]**：場合によっては、ファイルに HTTP ヘッダーを追加することが必要になる場合があります。最も一般的に、これらのヘッダーは、トラブルシューティング目的、[クロスオリジンリソース共有（CORS）](https://developer.mozilla.org/docs/Web/HTTP/CORS)用の追加情報を提供するため、または特定のキャッシュディレクティブを設定するために使用されます。
   * **[!UICONTROL HTTP リターンコードを無視]**：HTTP リターンコード（HTTP ステータスコードとも呼ばれる）は、HTTP リクエストの結果を示します。

1. 「**[!UICONTROL エラーを処理]**」オプションでは、転送中にエラーが発生した場合、アクティビティの後に「エラー」のアウトバウンドトランジションをアクティブ化できます。

   さらに、**ファイル転送**&#x200B;タイプのアクティビティでは、指定したパスでファイルが使用できない場合、「**[!UICONTROL 不明なファイルを処理]**」オプションを使用すると、アクティビティの後に「ファイルがありません」のアウトバウンドトランジションをアクティブ化できます。