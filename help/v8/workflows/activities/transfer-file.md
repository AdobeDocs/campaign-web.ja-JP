---
audience: end-user
title: ファイルを転送アクティビティの使用
description: ファイル転送ワークフローアクティビティの使用方法を学ぶ
source-git-commit: 6fe8be5510e13cdb9e9e1bce44aadb80619275e4
workflow-type: tm+mt
source-wordcount: '1129'
ht-degree: 19%

---

# ファイルを転送 {#transfer-file}

>[!CONTEXTUALHELP]
>id="acw_orchestration_transferfile"
>title="ファイルを転送"
>abstract="この **ファイルを転送** アクティビティを使用すると、ファイルの送受信、ファイルの有無の確認、サーバー上のファイルのリストアップが可能です。 使用されるプロトコルは、サーバー間プロトコルまたは HTTP プロトコルのいずれかです。"

>[!CONTEXTUALHELP]
>id="acw_orchestration_transferfile_options"
>title="「ファイルを転送」オプション"
>abstract="「ファイルを転送」オプション"

>[!CONTEXTUALHELP]
>id="acw_orchestration_transferfile_activity"
>title="ファイルを転送アクティビティ"
>abstract="ファイルを転送アクティビティ"

>[!CONTEXTUALHELP]
>id="acw_orchestration_transferfile_remoteserver"
>title="リモートサーバーにファイルを転送"
>abstract="リモートサーバーにファイルを転送"

>[!CONTEXTUALHELP]
>id="acw_orchestration_transferfile_source"
>title="ファイルのソースを転送"
>abstract="ファイルのソースを転送"

>[!CONTEXTUALHELP]
>id="acw_orchestration_transferfile_advancedoptions_delete_file"
>title="転送後にソースファイルを削除"
>abstract="転送後にソースファイルを削除"

>[!CONTEXTUALHELP]
>id="acw_orchestration_transferfile_advancedoptions_display_logs"
>title="セッションログを表示"
>abstract="セッションログを表示"

>[!CONTEXTUALHELP]
>id="acw_orchestration_transferfile_advancedoptions_list_files"
>title="すべてのファイルをリスト"
>abstract="すべてのファイルをリスト"

>[!CONTEXTUALHELP]
>id="acw_orchestration_transferfile_historization"
>title="ファイルの履歴化"
>abstract="ファイルの履歴化"

>[!CONTEXTUALHELP]
>id="acw_orchestration_transferfile_process_missing_file"
>title="不明なファイルを処理"
>abstract="不明なファイルを処理"

>[!CONTEXTUALHELP]
>id="acw_orchestration_transferfile_process_errors"
>title="エラーを処理"
>abstract="エラーを処理"

この **ファイルを転送** アクティビティはです **データ管理** アクティビティ。 これにより、ファイルの送受信、ファイルの有無の確認、サーバー上のファイルの一覧表示が可能になります。 使用されるプロトコルは、サーバー間プロトコルまたは HTTP プロトコルのいずれかです。

>[!NOTE]
>
>Campaign web ユーザーインターフェイスでは、次の 2 つのアクティビティを結合して 1 つにまとめました **ファイル転送** および **Web ダウンロード** の機能。 この統合は、アクティビティの機能に何の影響も与えません。

以下に説明する手順に従って、 **ファイルを転送** アクティビティ。

## 転送プロトコルと操作を選択します {#protocol}

1. を追加 **ファイルを転送** ワークフローにアクティビティを追加し、使用するプロトコルに応じて、実行する転送のタイプを指定します。

   * HTTP プロトコルの場合、次を選択します **[!UICONTROL Web ダウンロード]**. これにより、明示的な URL、外部アカウント、Adobe Campaign インスタンスで、GETのダウンロードやファイルのPOSTダウンロードを行うことができます。
   * その他のサーバー間プロトコルおよび関連するアクションについては、次を選択します： **[!UICONTROL ファイル転送]**.

1. アクティビティで実行するアクションを選択します。 使用できるアクションは、選択した転送のタイプによって異なります。 詳しくは、以下の節を展開してください。

   +++で使用可能なアクション **ファイル転送** タイプのアクティビティ

   * **[!UICONTROL ファイルのダウンロード]**：サーバーからファイルをダウンロードします。
   * **[!UICONTROL ファイルのアップロード]**: サーバーにファイルをアップロードします。
   * **[!UICONTROL ファイルが存在するかどうかをテスト]**：特定のファイルがサーバーに存在するかどうかを確認します。 「ファイルが存在する」と「ファイルが存在しません」という 2 つのアウトバウンドトランジションがアクティビティの後に生成されます。
   * **[!UICONTROL ファイルリスト]**：サーバーで使用可能なすべてのファイルをリストします。

+++

   +++で使用可能なアクション **Web ダウンロード** タイプのアクティビティ

   * **[!UICONTROL 簡易転送（GET）]**：ファイルを取得します。
   * **[!UICONTROL フォームを使用して転送（POST）]**：ファイルおよび追加パラメーターをアップロードします。

+++

   ![](../assets/workflow-transfer-file-action.png)

1. デフォルトでは、ファイルのアップロードアクションの場合、アクティビティは、前のアクティビティで指定したファイルを使用します。 別のファイルを使用するには、 **[!UICONTROL 前のアクティビティからファイルを使用]** オプションをオフにして、 **[!UICONTROL ファイルを追加]** ボタン。

   が含まれる **[!UICONTROL ソース]** フィールドに目的のファイル名を入力するか、式エディターを使用してイベント変数を使用してファイル名を計算します。 [イベント変数と式エディターの操作方法を説明します](../event-variables.md). 操作を繰り返して、必要な数のファイルを追加します。

## 転送先の定義 {#destination}

1. が含まれる **[!UICONTROL リモートサーバー]** セクションで、次のいずれかの方法を使用して接続するサーバーを指定します。

   * **[!UICONTROL 外部アカウントで定義された接続パラメーターの使用]**：外部アカウントの接続パラメーターを使用してサーバーに接続します。 が含まれる **[!UICONTROL サーバーフォルダー]** フィールドで、ファイルへのパス（またはファイルリストのアクションを表示するフォルダーへのパス）を指定します。
   * **[!UICONTROL クイック設定]**：ファイルの URL （またはファイルを一覧表示するアクションのフォルダー）を入力します。
   * **[!UICONTROL Adobe Campaign インスタンス]** （Web ダウンロードタイプのアクティビティ）:Adobe Campaign インスタンスサーバーからファイルをダウンロードします。

   ![](../assets/workflow-transfer-file-server.png)

1. Web ダウンロードPOSTアクションの場合は、操作で追加のパラメーターを渡すことができます。 それには、 **[!UICONTROL パラメーターを追加]** ボタンをクリックし、パラメーターの名前と値を指定します。 必要な数のパラメーターを追加できます。

1. デフォルトでは、ファイルのアップロード用に、サーバーにアップロードされたファイルが自動的に保存されます。 この履歴を保持しない場合は、を切り替えます **[!UICONTROL 送信されたファイルの履歴を保持]** オプションをオフにします。

## 履歴化設定 {#historization}

毎回 a **[!UICONTROL ファイルを転送]** アクティビティを実行すると、アップロードまたはダウンロードしたファイルが専用フォルダーに保存されます。 ワークフローのファイルを転送アクティビティごとに 1 つのフォルダーが作成されます。 デフォルトでは、ファイルはAdobe Campaign インストールフォルダー（`/vars`）してから処理されます。 特定のフォルダーを使用するには、 **[!UICONTROL デフォルトのストレージディレクトリを使用]** オプションをオフにして、ディレクトリのパスを入力します。

![](../assets/workflow-transfer-file-historization.png)

サーバー上の物理的な領域を確保するために、このフォルダーのサイズを制限できるようにすることが重要です。 それには、アクティビティのフォルダーに対する最大ファイル数または合計サイズを定義できます。 デフォルトで許可されている値はそれぞれ 100 個と 50 MB です。

このアクティビティを実行するたびに、次のようにフォルダーがチェックされます。

* アクティビティ実行の 24 時間前までに作成されたファイルのみが対象です。
* 考慮されるファイルの数が値よりも大きい場合、 **[!UICONTROL ファイル数]** フィールドに値が設定されている場合、許可されるファイルの最大数に達するまで、最も古いファイルが削除されます。
* 考慮されるファイルの合計サイズが次の値よりも大きい場合 **[!UICONTROL 最大サイズ （MB）]** パラメーターを指定すると、許可されている最大サイズ（MB 単位）に達するまで最も古いファイルが削除されます。

>[!CAUTION]
>
>アクティビティを再実行しない限り、フォルダーはチェックされず、消去もされません。そのため、大きなファイルを転送する場合は注意してください。

## 高度なエラー管理オプション {#advanced}

1. が含まれる **[!UICONTROL 詳細オプション]**&#x200B;を使用する場合、設定しているアクティビティのタイプに応じて、追加のオプションを使用できます。 詳しくは、以下の節を展開してください。

   +++追加のオプション **[!UICONTROL ファイル転送]** タイプのアクティビティ

   * **[!UICONTROL 転送後にソースファイルを削除]**：転送が正常に完了した後にソースファイルを消去します。
   * **[!UICONTROL セッションログの表示]**：このオプションを有効にすると、ワークフローの実行後、転送操作に関する情報がワークフローのログに表示されます。
   * **[!UICONTROL すべてのファイルをリスト]** （ファイル一覧表示のアクション）：このオプションは、 `vars.filenames` イベント変数。ファイル名はで区切られます。 `n` 文字。 [イベント変数の使用方法を学ぶ](../event-variables.md)

+++

   +++追加のオプション **[!UICONTROL Web ダウンロード]** タイプのアクティビティ

   * **[!UICONTROL リダイレクトに従う]**：ファイルのリダイレクトでは、上書きを使用して、データの入力や出力を別のタイプのデバイスに送信できます。
   * **[!UICONTROL HTTP ヘッダーをファイルに追加]**：場合によっては、ファイルに HTTP ヘッダーを追加することが必要になる場合があります。最も一般的に、これらのヘッダーは、トラブルシューティング目的、[クロスオリジンリソース共有（CORS）](https://developer.mozilla.org/docs/Web/HTTP/CORS)用の追加情報を提供するため、または特定のキャッシュディレクティブを設定するために使用されます。
   * **[!UICONTROL HTTP リターンコードを無視]**：HTTP リターンコード（HTTP ステータスコードとも呼ばれる）は、HTTP リクエストの結果を示します。

1. この **[!UICONTROL エラーを処理]** オプションを使用すると、転送中にエラーが発生した場合に、アクティビティの後に「エラー」アウトバウンドトランジションを有効化できます。

   さらに、の場合 **ファイル転送** タイプのアクティビティ、 **[!UICONTROL 不明なファイルを処理]** オプションを使用すると、指定されたパスでファイルが使用できない場合、アクティビティの後に「ファイルなし」のアウトバウンドトランジションをアクティブ化できます。
