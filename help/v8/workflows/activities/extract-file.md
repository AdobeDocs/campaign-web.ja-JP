---
audience: end-user
title: ファイルを抽出ワークフローアクティビティの使用
description: ファイルを抽出ワークフローアクティビティの使用方法を説明します
source-git-commit: 575219c7bcef303e211f504d13227183933924cc
workflow-type: tm+mt
source-wordcount: '860'
ht-degree: 18%

---

# ファイルを抽出 {#extract-file}

>[!CONTEXTUALHELP]
>id="acw_orchestration_extractfile"
>title="ファイルを抽出"
>abstract="この **ファイルを抽出** アクティビティを使用すると、Adobe Campaignから外部ファイルの形式でデータを書き出すことができます。 その後、ファイル転送アクティビティを使用して、データを SFTP、クラウドストレージ、キャンペーンサーバーなどのサーバーの場所にエクスポートできます。"

この **ファイルを抽出** アクティビティはです **データ管理** アクティビティ。 このアクティビティを使用すると、Adobe Campaignから外部ファイルの形式でデータを書き出すことができます。 その後、ファイル転送アクティビティを使用して、データを SFTP、クラウドストレージ、キャンペーンサーバーなどのサーバーの場所にエクスポートできます。

を設定するには **ファイルを抽出** アクティビティ、追加 **ファイルを抽出** ワークフローにアクティビティを追加するには、次の手順に従います。

## 抽出するファイルの設定 {#extract-configuration}

>[!CONTEXTUALHELP]
>id="acw_orchestration_extractfile_file"
>title="抽出するファイル"
>abstract="抽出するファイルを選択します。"

この **[!UICONTROL 抽出するファイル]** 「」セクションでは、ファイルのプロパティと組み込むデータを設定できます。

![](../assets/extract-file-file.png)

1. が含まれる **[!UICONTROL ファイル名]** フィールドに、抽出するファイルの名前を入力します。

   イベント変数、条件、日付/時間関数を使用して、ファイル名をパーソナライズできます。 これを行うには、「**[!UICONTROL パーソナライゼーションダイアログを開く]**」アイコンをクリックして、式エディターを開きます。[イベント変数と式エディターの操作方法を説明します](../event-variables.md)

1. 抽出したファイルに存在する列を指定します。 これを行うには、次の手順に従います。

   1. 「」をクリックします **[!UICONTROL 出力列を追加]**.
   1. 列に表示する属性を選択し、確定します。使用できる属性は、ワークフローのターゲティングディメンションによって異なります。
   1. 列を追加したら、その列を変更できます **[!UICONTROL ラベル]** 関連付けられたを変更します **[!UICONTROL 属性]**.
   1. 列の値に変換を適用する場合は、ドロップダウンリストから値を選択します。 例えば、選択した列内のすべての値を大文字に切り替えることができます。

1. これらの手順を繰り返して、必要な数の列を抽出ファイルに追加します。 列の位置を変更するには、上下の矢印を使用します。

1. 抽出したファイルからすべての重複行を削除するには、 **[!UICONTROL 重複行を削除（リスト）]** オプション。

1. 抽出したファイルを属性に基づいて並べ替えるには、「」をオンにします **[!UICONTROL ソートを有効にする]** オプションを使用して、ファイルの並べ替えの基準にする属性と、並べ替えの基準（昇順または降順）を選択します。 ファイルの列に追加されているかどうかに関係なく、現在のターゲティングディメンションの任意の属性で並べ替えることができます。

## 抽出されたファイル形式の設定 {#file}

>[!CONTEXTUALHELP]
>id="acw_orchestration_extractfile_destinationformat"
>title="宛先のフォーマット"
>abstract="形式を選択します。"

この **[!UICONTROL 宛先]** 「形式」セクションでは、抽出したファイルの形式を設定できます。

1. を選択します。 **[!UICONTROL 出力形式]** 抽出されたファイルの場合： **テキスト**, **列を持つ固定を使用したテキスト**, **CSV （Excel）** または **XML**.

1. 「」をクリックします **[!UICONTROL 抽出形式]** ボタンをクリックして、選択した形式に関連する特定のオプションにアクセスします。 詳細については、セクションを展開して以下を参照してください。

+++ 使用可能な抽出形式オプション

   * **[!UICONTROL 最初の行を列ヘッダーとして使用]**（テキスト／CSV（Excel）形式）：最初の列をヘッダーとして使用するように、このオプションをオンに切り替えます。
   * **[!UICONTROL 列区切り記号]** （テキストフォーマット）：出力ファイルの列区切り記号として使用する文字を指定します。
   * **[!UICONTROL 文字列区切り文字]** （テキスト形式）：出力ファイルの文字列の区切り方法を指定します。
   * **[!UICONTROL ライン末]** （テキスト形式）：出力ファイルの行の終わりの区切り方法を指定します。
   * **[!UICONTROL エンコード]**：出力ファイルのエンコーディングを選択します。
   * **[!UICONTROL 日付の形式と区切り記号]**：出力ファイルでの日付の形式を指定します。
   * **[!UICONTROL 数値フォーマット]**：出力ファイルでの数値の形式を指定します。
   * **[!UICONTROL 列挙の内部値の代わりにラベルを書き出し]**：列挙値を書き出し、内部 ID ではなく、わかりやすい列ラベルを取得する場合は、このオプションをオンに切り替えます。

+++

   ![](../assets/extract-file-format.png)

## 後処理ステージの追加 {#script}

>[!CONTEXTUALHELP]
>id="acw_orchestration_extractfile_postprocessing"
>title="後処理"
>abstract="後処理ステップを定義"

この **[!UICONTROL 変更スクリプトをエクスポート]** では、圧縮や暗号化など、データ抽出中に実行する処理ステージを適用できます。 それには、 **[!UICONTROL スクリプトを編集]** ボタン。

式エディターが開き、ファイルに適用するコマンドを入力できます。 左側のパネルには、スクリプトの作成に利用できる定義済みの構文が表示されます。 [イベント変数と式エディターの操作方法を説明します](../event-variables.md)

![](../assets/extract-file-script.png)

## 追加のオプション {#additiona-options}

>[!CONTEXTUALHELP]
>id="acw_orchestration_extractfile_outbound"
>title="アウトバウンドトランジション"
>abstract="「**アウトバウンドトランジションを生成**」オプションを切り替えて、現在のアクティビティの後にアウトバウンドトランジションを追加します。"

>[!CONTEXTUALHELP]
>id="acw_orchestration_extractfile_error"
>title="エラーを処理"
>abstract="「**エラーを処理**」オプションを切り替えて、エラーを含むアウトバウンドトランジションを追加します。"

出力ファイルの抽出を設定したら、トランジションとエラー管理に関連する追加のオプションを使用できます。

* **[!UICONTROL アウトバウンドトランジションを生成]**：アウトバウンドトランジションを追加し、そのラベルを設定するには、このオプションをオンに切り替えます。
* **[!UICONTROL インバウンドトランジションが空の場合はファイルを生成しない]**：インバウンドトランジションにデータが含まれていない場合にファイル抽出をスキップするには、このオプションをオンに切り替えます。
* **[!UICONTROL プロセスエラー]**：ファイルの抽出中にエラーが発生した場合にアウトバウンドトランジションを追加するには、このオプションをオンに切り替えます。

## 例 {#example}

次の例では、を使用しています。 **オーディエンスを作成** アクティビティの後 **ファイルを抽出** すべてのターゲットプロファイルを CSV ファイルに抽出するアクティビティ

![](../assets/extract-file-example.png)

* この **[!UICONTROL ファイル名]** フィールドは、抽出日を含むように設定されます。

  ![](../assets/extract-file-example-name.png)

* 列を追加して、データベースにプロファイルの姓と名、顧客 ID および作成日を表示します。

  ![](../assets/extract-file-example-columns.png)
