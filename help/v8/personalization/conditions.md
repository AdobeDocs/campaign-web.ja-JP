---
title: 条件付きコンテンツを作成
description: Adobe Campaign Web でコンテンツをパーソナライズするための条件を定義する方法について説明します
feature: Personalization
topic: Personalization
role: Data Engineer
level: Beginner
exl-id: 101ad23b-7ea5-42c7-9249-7c14febe6eb7
source-git-commit: f6e3fc0da05ecc2fda158c970458cc702b27079c
workflow-type: tm+mt
source-wordcount: '946'
ht-degree: 100%

---

# 条件付きコンテンツをビルド{#add-conditions}

>[!CONTEXTUALHELP]
>id="acw_conditional_content"
>title="条件付きコンテンツを追加"
>abstract="条件付きコンテンツフィールドを設定して、受信者のプロファイルデータに基づいて高度な動的パーソナライゼーションを作成します。特定の条件が満たされた場合に、メッセージコンテンツ内のテキストブロック、リンク、件名、画像を置き換えることができます。"

## 条件付きコンテンツの基本を学ぶ {#gs}

条件付きコンテンツは、受信者のプロファイルデータに基づいて動的パーソナライゼーションを作成できる強力な機能で、特定の条件が満たされた場合にテキストブロックと画像を自動的に置き換えます。この機能により、キャンペーンを新たなレベルに引き上げて、、高度にターゲット化されたパーソナライズされたエクスペリエンスをオーディエンスに提供できます。

条件付きコンテンツフィールドを設定することで、例えば受信者のプロファイルに基づいて高度な動的パーソナライゼーションを作成できます。特定の条件が満たされた場合に、メッセージコンテンツ内のテキストブロック、リンク、件名、画像を置き換えることができます。例えば、Adobe Campaign データベースの「性別」フィールドの値に従って「Mr」または「Mrs」を表示したり、受信者の優先言語に基づいて別のリンクを含めたりできます。

条件付きコンテンツを作成するには、**式エディター**&#x200B;で特定のヘルパー関数を使用して条件を作成する必要があります。この方法は、すべての配信チャネルで、件名、メールリンク、テキスト／ボタンコンテンツコンポーネントなど、式エディターにアクセスできる任意のフィールドで使用できます。[式エディターにアクセスする方法を学ぶ](gs-personalization.md#access)

式エディターに加えて、メールをデザインする際に専用の&#x200B;**条件付きコンテンツビルダー**&#x200B;を活用して、メール本文の要素に対して複数のバリアントを作成できます。[詳しくは、メールでの条件付きコンテンツの作成方法を参照してください](#condition-condition-builder)

## 式エディターでの条件を作成 {#condition-perso-editor}

式エディターを使用して配信の条件付きコンテンツを定義するには、次の手順に従います。この例では、受信者の言語（フランス語または英語）に基づく条件付きコンテンツを作成します。

1. 配信を開き、コンテンツ編集セクションに移動します。

1. 条件付きコンテンツを追加するフィールドを見つけます。例えば、SMS メッセージに条件付きコンテンツを追加できます。

1. フィールドの横にある「**[!UICONTROL パーソナライゼーションダイアログを開く]**」アイコンをクリックして、式エディターを開きます。

   ![](assets/open-perso-editor-sms.png){zoomable=&quot;yes&quot;}

1. パーソナライゼーションエディターで、左側にある&#x200B;**[!UICONTROL 条件]**&#x200B;メニューを参照します。

1. 条件の作成を開始するには、**If** 関数の横にある「+」アイコンをクリックします。中央の画面に次の行が追加されます：`<% if (<FIELD>==<VALUE>) { %>Insert content here<% } %>`

   * `<FIELD>` を、受信者の言語などのパーソナライゼーションフィールド `recipient.language` に置き換えます。
   * `<VALUE>` を満たす値に置き換えます。例：`'French'`
   * `Ìnsert content here` を、指定した条件を満たすプロファイルに表示するコンテンツに置き換えます。

     ![](assets/condition-sample1.png){zoomable=&quot;yes&quot;}{width="800" align="center"}

1. 受信者が条件を満たさない場合に表示するコンテンツを指定します。これを行うには、**else** ヘルパー関数を使用します。

   1. 式終了タグ `%>` の前にカーソルを置き、**Else** 関数の横にある `+` をクリックします。

   1. `Ìnsert content here` を、if 関数の条件を満たさないプロファイルに表示するコンテンツに置き換えます。

   ![](assets/condition-sample2.png){zoomable=&quot;yes&quot;}{width="800" align="center"}

   また、**else if** ヘルパー関数を使用して、複数のコンテンツバリアントを含む条件を作成することもできます。例えば、次の式では、受信者の言語に応じてメッセージの 3 つのバリアントが表示されます。

   ![](assets/condition-sample3.png){zoomable=&quot;yes&quot;}{width="800" align="center"}

   >[!NOTE]
   >
   >ヘルパー関数を追加するたびに、関数の前後に開始タグ（`<%`）と終了タグ（`%>`）が自動的に追加されます。
   >
   >式内に「Else」ヘルパー関数を追加した後の例を次に示します。
   >
   >`<% if (<FIELD>==<VALUE>) { %>Insert content here<% } <% else { %> Insert content here<% } %>%>`
   >
   >構文エラーを避けるために、これらのタグを削除する必要があります。この例では、**else** 関数タグを削除した後の修正された式を次に示します。
   >
   >`<% if (<FIELD>==<VALUE>) { %>Insert content here<% } else { %> Insert content here<% } %>`

1. 条件の準備が整ったら、コンテンツを保存し、コンテンツをシミュレートしてそのレンダリングを確認できます。

## メールでの条件付きコンテンツを作成 {#condition-condition-builder}

条件付きコンテンツをメールで作成するには、次の 2 つの方法があります。
* 式エディターで、ヘルパー関数を使用して条件を作成する。
* メールのデザイン時にアクセスできる、専用の条件付きコンテンツビルダーで行う。

次の節では、メールデザイナーの条件付きコンテンツ機能を使用して条件を作成する方法を順を追って説明します。式エディターを使用して条件を作成する方法について詳しくは、[こちら](#condition-perso-editor)を参照してください。

この例では、受信者の言語に基づく複数のバリアントを含むメールメッセージを作成します。次の手順に従います。

1. メール配信を作成または開き、コンテンツを編集し、「**[!UICONTROL メール本文を編集]**」ボタンをクリックして、メールデザインワークスペースを開きます。

1. コンテンツコンポーネントを選択し、「**[!UICONTROL 条件付きコンテンツを有効にする]**」アイコンをクリックします。

   ![](assets/condition-email-enable.png){zoomable=&quot;yes&quot;}{width="800" align="center"}

1. 画面の左側に&#x200B;**[!UICONTROL 条件付きコンテンツ]**&#x200B;パネルが開きます。 このパネルでは、条件を使用して、選択したコンテンツコンポーネントの複数のバリエーションを作成できます。

1. 最初のバリアントを設定します。**[!UICONTROL 条件付きコンテンツ]**&#x200B;パネルの&#x200B;**[!UICONTROL バリアント - 1]** 上にポインタを合わせて、「**[!UICONTROL 条件を追加]**」ボタンをクリックします。

   ![](assets/condition-add-condition.png){zoomable=&quot;yes&quot;}{width="800" align="center"}

1. クエリモデラーが開きます。受信者のプロファイルデータをフィルタリングして、条件を作成できます。[詳しくは、クエリモデラーの操作方法を参照してください](../query/query-modeler-overview.md)。

   メッセージの最初のバリアントの条件が整ったら、「**[!UICONTROL 確認]**」をクリックします。この例では、言語が「フランス語」の受信者をターゲティングとするルールを作成します。

   ![](assets/condition-example.png){zoomable=&quot;yes&quot;}{width="800" align="center"}

1. このルールがバリアントに関連付けられました。読みやすくするために、省略記号メニューをクリックしてバリアントの名前を変更することをお勧めします。

1. メッセージの送信時にルールが満たされた場合の、コンポーネントの表示方法を設定します。この例では、受信者の優先言語がフランス語の場合、テキストをフランス語で表示します。

   ![](assets/condition-email-variant1.png){zoomable=&quot;yes&quot;}{width="800" align="center"}

1. コンテンツコンポーネントに必要な数だけバリアントを追加します。いつでもバリアントを切り替え、条件ルールに基づいてコンテンツコンポーネントの表示方法を確認できます。

   >[!NOTE]
   >メッセージの送信時にバリアントで定義されたルールのいずれも満たされない場合、コンテンツコンポーネントには、**[!UICONTROL 条件付きコンテンツ]**&#x200B;パネルの&#x200B;**[!UICONTROL デフォルトバリアント]**&#x200B;で定義されたコンテンツが表示されます。
