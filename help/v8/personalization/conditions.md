---
title: 条件付きコンテンツの作成
description: Adobe Campaign web UI でコンテンツをパーソナライズするための条件を定義する方法について説明します
feature: Personalization
topic: Personalization
role: Data Engineer
level: Beginner
badge: label="Alpha" type="Positive"
exl-id: b650a859-e27d-4a36-a725-a1f5bb31e014
source-git-commit: dbb86e2e835ce114cd47380cd256c5873a9eae43
workflow-type: tm+mt
source-wordcount: '918'
ht-degree: 2%

---

# 条件付きコンテンツの作成{#add-conditions}

>[!CONTEXTUALHELP]
>id="acw_homepage_card3"
>title="条件付きコンテンツの作成"
>abstract="条件付きコンテンツを作成して、受信者のプロファイルに基づいて動的パーソナライゼーションを定義し、特定の条件が満たされた場合にテキストブロックや画像を自動的に置き換えます。 この機能を使用すると、キャンペーンを新たな高みに導き、ターゲットを絞り、パーソナライズされたエクスペリエンスをオーディエンスに提供できます。"

条件付きコンテンツは、受信者のプロファイルに基づいて動的パーソナライゼーションを作成し、特定の条件が満たされた場合にテキストブロックや画像を自動的に置き換える強力な機能です。 この機能を使用すると、キャンペーンを新たな高みに導き、ターゲットを絞り、パーソナライズされたエクスペリエンスをオーディエンスに提供できます。

条件付きコンテンツフィールドを設定すると、例えば受信者のプロファイルに基づいて高度な動的パーソナライゼーションを作成できます。 特定の条件が満たされた場合、メッセージコンテンツ内のテキストブロック、リンク、件名、画像が置き換えられます。 例えば、Adobe Campaignデータベースの「性別」フィールドの値に応じて「Mr」または「Mrs」を表示したり、受信者の優先言語に基づいて異なるリンクを含めたりできます。

## 条件付きコンテンツの作成方法

条件付きコンテンツを作成するには、 **式エディター** 特定のヘルパー関数を使用する。 この方法は、すべての配信チャネルに対して、件名行、E メールリンク、テキスト/ボタンコンテンツコンポーネントなど、式エディターにアクセスできる任意のフィールドで使用できます。 [式エディターにアクセスする方法を説明します](gs-personalization.md/#access)

式エディターに加えて、専用の **条件付きコンテンツビルダー** プロファイル属性のみを使用して条件を作成できる e メールをデザインする場合。 [メールでの条件付きコンテンツの作成方法を説明します](#condition-condition-builder)

## 式エディターでの条件の作成 {#condition-perso-editor}

式エディターを使用して配信の条件付きコンテンツを定義するには、次の手順に従います。 この例では、受信者の言語（フランス語または英語）に基づく条件付きコンテンツを作成します。

1. 配信を開き、コンテンツ編集セクションに移動します。

1. 条件付きコンテンツを追加するフィールドを見つけます。 例えば、SMS メッセージに条件付きコンテンツを追加できます。

1. 次をクリック： **[!UICONTROL パーソナライゼーションダイアログを開く]** アイコンをクリックして、式エディターを開きます。

   ![](assets/open-perso-editor-sms.png)

1. パーソナライゼーションエディターで、 **[!UICONTROL ヘルパー関数]** メニューを開きます。

1. 条件の作成を開始するには、 **If** 関数に置き換えます。 中央の画面に次の行が追加されます。`<% if (<FIELD>==<VALUE>) { %>Insert content here<% } %>`

   * 置換 `<FIELD>` パーソナライゼーションフィールド（受信者の言語など）が含まれる場合： `recipient.language`.
   * 置換 `<VALUE>` を満たす値と共に使用します。 例： `'French'`.
   * 置換 `Ìnsert content here` 指定した条件を満たすプロファイルに表示するコンテンツを含める。

     ![](assets/condition-sample1.png){width="800" align="center"}

1. 受信者が条件を満たさない場合に表示するコンテンツを指定します。 これをおこなうには、 **else** ヘルパー関数：

   1. 式の終了タグの前にカーソルを置きます。 `%>` をクリックし、 `+` の横 **Else** 関数に置き換えます。

   1. 置換 `Ìnsert content here` if 関数の条件を満たさないプロファイルに表示するコンテンツを含める。

      ![](assets/condition-sample2.png){width="800" align="center"}

      また、 **else if** 複数のコンテンツバリアントを使用して条件を作成するヘルパー関数。 例えば、以下の式は、受信者の言語に応じて、メッセージの 3 つのバリエーションを表示します。

      ![](assets/condition-sample3.png){width="800" align="center"}

   >[!NOTE]
   >
   >ヘルパー関数が追加されるたびに、`<%`) および終了 (`%>`) タグは、関数の前後に自動的に追加されます。
   >
   >式内に「Else」ヘルパー関数を追加した後の例を次に示します。>
   >
   >`<% if (<FIELD>==<VALUE>) { %>Insert content here<% } <% else { %> Insert content here<% } %>%>`
   >
   >構文エラーを避けるために、これらのタグを必ず削除してください。 この例では、 **else** 関数タグは次のとおりです。
   >
   >`<% if (<FIELD>==<VALUE>) { %>Insert content here<% } else { %> Insert content here<% } %>`

1. 条件の準備が整ったら、コンテンツを保存し、コンテンツをシミュレートしてそのレンダリングを確認できます。

## メールでの条件付きコンテンツの作成 {#condition-condition-builder}

条件付きコンテンツを E メールで作成するには、次の 2 つの方法があります。
* 式エディターで、ヘルパー関数を使用して条件を作成すると、
* E メールのデザイン時にアクセス可能な、専用の条件付きコンテンツビルダー。

式エディターを使用した条件の作成方法に関する詳細情報を利用できます [ここ](#condition-perso-editor). 以下の節では、E メールデザイナーの条件付きコンテンツ機能を使用して条件を作成する手順を順を追って説明します。 この例では、受信者の言語に基づく複数のバリアントを含む E メールメッセージを作成します。 次の手順に従います。

1. E メール配信を作成または開き、コンテンツを編集して、 **[!UICONTROL メール本文を編集]** ボタンをクリックして、e メールデザインワークスペースを開きます。

1. コンテンツコンポーネントを選択し、 **[!UICONTROL 条件付きコンテンツを有効にする]** アイコン

   ![](assets/condition-email-enable.png){width="800" align="center"}

1. この **[!UICONTROL 条件付きコンテンツ]** 画面の左側にパネルが開きます。 このペインでは、条件を使用して、選択したコンテンツコンポーネントの複数のバリエーションを作成できます。

1. 最初のバリアントを設定します。 上にマウスポインターを置く **[!UICONTROL バリアント — 1]** 内 **[!UICONTROL 条件付きコンテンツ]** ウィンドウを開き、 **[!UICONTROL 条件を追加]** アイコン

1. ルールビルダーが表示されます。 プロファイル属性を使用してメッセージの最初のバリアントの条件を作成し、「 **[!UICONTROL 確認]**. この例では、言語が「フランス語」の受信者をターゲットにしたルールを作成します。

   ![](assets/condition-email-rule.png){width="800" align="center"}

1. ルールがバリアントに関連付けられました。 可読性を高めるために、省略記号メニューをクリックして、バリアントの名前を変更することをお勧めします。

1. メッセージの送信時にルールが満たされた場合のコンポーネントの表示方法を設定します。 この例では、受信者の優先言語の場合はフランス語でテキストを表示します。

   ![](assets/condition-email-variant1.png){width="800" align="center"}

1. コンテンツコンポーネントに必要な数だけバリアントを追加します。 バリエーションをいつでも切り替えて、条件ルールに基づいてコンテンツコンポーネントの表示方法を確認できます。

   >[!NOTE]
   >メッセージの送信時にバリエーションで定義されたルールがいずれも満たされない場合、コンテンツコンポーネントは、 **[!UICONTROL デフォルトのバリアント]** から **[!UICONTROL 条件付きコンテンツ]** ウィンドウ
